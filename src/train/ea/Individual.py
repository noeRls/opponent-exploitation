from __future__ import annotations
from src.environement.Strategy import Strategy
from typing import List

class Individual():
    uid = 0

    startegy: Strategy
    id: int
    won_against: List[Individual]
    lost_against: List[Individual]
    fitness: int

    def __init__(self, strategy) -> None:
        Individual.uid += 1
        self.id = Individual.uid
        self.startegy = strategy
        self.reset()

    def reset(self):
        self.fitness = 0
        self.won_against = []
        self.lost_against = []

    def register_win(self, opponent: Individual):
        self.won_against.append(opponent)
        opponent.lost_against.append(self)

    def compute_fitness(self):
        self.fitness = 0
        for i in self.won_against:
            self.fitness += 1.0 / float(len(i.lost_against))
        return self.fitness